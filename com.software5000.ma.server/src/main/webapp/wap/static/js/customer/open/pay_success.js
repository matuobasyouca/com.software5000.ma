webpackJsonp([12],{156:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(6),i=t.n(a),o=t(2),n=t(7);e.default={components:{maHead:i.a},data:function(){return{isLoading:!1,hrefLink:"",orderNo:"",businessId:"",cpuuid:"",showShareDialog:!1,cpImgSrc:"",id:""}},methods:{getImgMessage:function(s,e){var t=this;console.log(""+this.domain+this.$joggle.customer.paySuccess.selectCouponsByCpUuid),this.$ajax(""+this.domain+this.$joggle.customer.paySuccess.selectCouponsByCpUuid,{cpUuid:this.cpuuid},e,function(a){"ZS011000"===a.code?(t.cpImgSrc=a.data.cpImgSrc,t.id=a.data.id,s&&s()):(e.close(),t.$message({type:"error",duration:1200,message:a.msg}))})},updateCouponsForForwardCount:function(){var s=this.domain+"/open/coupons/updateCouponsForForwardCount";this.$ajax(s,{id:this.id},!1,function(){})},goGetRedpack:function(){t.i(n.a)("/open/coupons/take.html","emkt",{orderNo:this.orderNo,businessId:this.businessId,cpuuid:this.cpuuid})},continueShare:function(){this.showShareDialog=!1,this.shareDialog()},shareDialog:function(){this.$refs.share.style.display="block"},cancelShare:function(){this.$refs.share.style.display="none"},setWxConfig:function(s,e){var t=this;this.$ajax(this.$joggle.customer.paySuccess.getWxConfig,{url:window.location.href},e,function(a){var i=t;"ZS011000"===a.code?(s&&s(),wx.config({debug:!1,appId:a.data.appId,timestamp:a.data.timestamp,nonceStr:a.data.nonce,signature:a.data.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage"]}),wx.ready(function(){var s=encodeURIComponent("http://emkt."+i.hrefLink+".com/open/coupons/take.html?orderNo="+i.orderNo+"&businessId="+i.businessId+"&cpuuid="+i.cpuuid);wx.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage"]}),wx.onMenuShareTimeline({title:"您的好友赠送您现金红包",desc:"大家都在抢，手快有，手慢无",link:"http://ma."+i.hrefLink+".com/open/mzscp/redirctUrl?url="+s,imgUrl:t.cpImgSrc,type:"link",success:function(){i.updateCouponsForForwardCount(),i.cancelShare(),i.showShareDialog=!0}}),wx.onMenuShareAppMessage({title:"您的好友赠送您现金红包",desc:"大家都在抢，手快有，手慢无",link:"http://ma."+i.hrefLink+".com/open/mzscp/redirctUrl?url="+s,imgUrl:i.cpImgSrc,type:"link",success:function(){i.updateCouponsForForwardCount(),i.cancelShare(),i.showShareDialog=!0}})})):(e.close(),t.$message({type:"error",message:a.msg,duration:1200}))})}},computed:{barCodeImg:function(){var s="/wap/static/img/bar_code.552f56c.png",e=window.location.host.split(".");return 1==this.recodeType&&"zhongshengchengpin"===e[1]&&(s="/wap/static/img/bar_code_test.00ff770.png"),s}},created:function(){var s=this;this.hrefLink=window.location.href.split(".")[1],this.orderNo=t.i(o.a)("orderNo"),this.businessId=t.i(o.a)("businessId"),this.cpuuid=t.i(o.a)("cpuuid"),this.domain=t.i(o.a)("domain");var e=this.$loading();this.getImgMessage(function(){s.setWxConfig(function(){e.close()},e)},e)}}},231:function(s,e,t){t(387);var a=t(0)(t(156),t(316),null,null);s.exports=a.exports},316:function(s,e,t){s.exports={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return s.isLoading?s._e():t("div",{staticClass:"pay-success-page"},[t("ma-head",{attrs:{"go-back":!1,home:!1}},[s._v("支付成功")]),s._v(" "),t("div",{staticClass:"pay-success-detail"},[t("div",{staticClass:"detail-middle"},[t("div",{staticClass:"box-shadow"}),s._v(" "),s._m(0),s._v(" "),t("p",{staticClass:"p1"},[s._v("恭喜你，获得现金红包")]),s._v(" "),t("p",{staticClass:"p2"},[s._v("分享给朋友，一起抢")]),s._v(" "),t("zs-button",{staticClass:"share-btn",attrs:{type:"primary"},on:{click:s.shareDialog}},[s._v("立即分享")]),s._v(" "),s._m(1),s._v(" "),t("div",{staticClass:"ewm-img"},[t("img",{attrs:{src:s.barCodeImg}})]),s._v(" "),t("p",{staticClass:"p3"},[s._v("长按关注公众号")]),s._v(" "),t("p",{staticClass:"p4"},[s._v("查看消费账单")])],1)]),s._v(" "),t("div",{ref:"share",staticClass:"shade",on:{click:s.cancelShare}},[s._m(2),s._v(" "),t("div",{staticClass:"jian-img"})]),s._v(" "),t("zs-dialog",{staticClass:"share-dialog",model:{value:s.showShareDialog,callback:function(e){s.showShareDialog=e},expression:"showShareDialog"}},[t("div",{staticClass:"dialog-body"},[t("div",{staticClass:"dialog-img"}),s._v(" "),t("p",{staticClass:"p1"},[s._v("分享成功")]),s._v(" "),t("p",{staticClass:"p2"},[s._v("你可继续分享，或去领红包")])]),s._v(" "),t("template",{slot:"footer"},[t("span",{staticClass:"continue",on:{click:s.continueShare}},[s._v("继续分享")]),s._v(" "),t("span",{staticClass:"goGet",on:{click:s.goGetRedpack}},[s._v("去领取")])])],2)],1)},staticRenderFns:[function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("div",{staticClass:"redPack-img"},[a("img",{attrs:{src:t(437)}})])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"row-make"},[t("div",{staticClass:"row-circle"})])},function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"redPack-p"},[t("p",{staticClass:"p-top"},[s._v("恭喜你，获得现金红包")]),s._v(" "),t("p",{staticClass:"p-bottom"},[s._v("分享给朋友，一起抢")])])}]}},387:function(s,e){},437:function(s,e,t){s.exports=t.p+"static/img/redPack.f697df0.png"},462:function(s,e,t){s.exports=t(59)},59:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(1),i=t(231),o=t.n(i),n=t(5),c=(t.n(n),t(4));t(3);a.a.use(c.a),new a.a({el:"#app",render:function(s){return s(o.a)}})}},[462]);