webpackJsonp([32],{152:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(7),s=a.n(i),n=a(6),r=a.n(n),o=a(1),d=a(8);t.default={components:{maHead:r.a,tab:s.a},data:function(){return{currTab:1,isLoading:!0,templateId:"",businessId:"",templateType:"",role:"MaUser",activePage:"",iframeHeight:"",loading:null}},computed:{tabs:function(){return 3==this.templateType?["活动介绍","活动列表","拼团记录"]:["活动介绍","活动列表","参与记录","使用记录"]},targetLink:function(){var e=[this.activePage,"/web/utils/list_marketing.html","/web/utils/list_join.html","/web/utils/list_used.html"];if(this.templateType&&this.activePage&&this.businessId){return(1==this.currTab?this.activePage:""+d.a.emkt+e[this.currTab-1])+"?businessId="+this.businessId+"&templateId="+this.templateId+"&type="+this.templateType+"&role="+this.role+"$businessName="+this.businessName}return""}},methods:{selectMarketingTemplateById:function(e){var t=this;this.$ajax(this.$joggle.merchant.marketing.selectMarketingTemplateById,{templateId:this.templateId},!1,function(i){"ZS011000"===i.code?(t.templateType=i.data.type,t.activePage=a.i(o.a)(i.data.webConfig).introduction):t.$message({type:"error",message:i.msg}),e&&e()})},selectBusinessInfo:function(e,t){var a=this;this.$ajax(this.$joggle.merchant.workorder.selectBusinessInfo,{},t,function(t,i){"ZS011000"===t.code?(a.businessId=t.data.id,a.businessName=t.data.businessName,e&&e()):(i.close(),a.$message({type:"error",message:t.msg}))})},handleFinish:function(){this.$refs.ifameBase.contentWindow.document.getElementById("listPage")&&(this.$refs.ifameBase.contentWindow.document.getElementById("listPage").style.margin="0 auto",window.frameResize(),this.isLoading=!1)},handleTabChange:function(e){this.currTab!=e&&window.loading(),this.currTab=e}},created:function(){var e=this;document.domain=d.b,this.templateId=a.i(o.b)("templateId")||"",this.loading=this.$loading(),this.selectMarketingTemplateById(),this.selectBusinessInfo(),window.loading=function(){e.loading=e.$loading()},window.finish=function(){e.loading.close(),e.isLoading=!1},window.message=function(t,a){e.$message({type:t,message:a})},window.frameResize=function(){e.iframeHeight=e.$refs.ifameBase.contentWindow.document.body.offsetHeight+"px"}},mounted:function(){}}},259:function(e,t,a){function i(e){a(486)}var s=a(0)(a(152),a(392),i,null,null);e.exports=s.exports},392:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"marketing-page"},[a("ma-head",{attrs:{"curr-id":"02"}}),e._v(" "),a("zs-breadcrumb",{attrs:{separator:"arrow-right"}},[a("zs-breadcrumb-item",[e._v("营销")])],1),e._v(" "),a("tab",{attrs:{tabs:e.tabs,current:e.currTab},on:{change:e.handleTabChange}}),e._v(" "),a("div",{staticClass:"iframe-wrap"},[a("iframe",{ref:"ifameBase",style:{height:e.iframeHeight},attrs:{src:e.targetLink,frameborder:"0"},on:{load:e.handleFinish}})])],1)},staticRenderFns:[]}},45:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),s=a(259),n=a.n(s),r=a(5),o=(a.n(r),a(3),a(4));i.a.use(o.a),new i.a({el:"#app",render:function(e){return e(n.a)}})},486:function(e,t){},518:function(e,t,a){e.exports=a(45)}},[518]);