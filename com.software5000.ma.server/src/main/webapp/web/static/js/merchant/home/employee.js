webpackJsonp([22],{133:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(228),a=o.n(s),i=o(6),l=o.n(i);t.default={components:{maHead:l.a,list:a.a}}},134:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(1);t.default={name:"list",data:function(){return{datas:[],context:this,columns:[{title:"员工姓名",key:"realName",align:"center",width:166},{title:"性别",key:"sex",align:"center",width:116},{title:"手机号/账号",key:"mobile",align:"center",width:196},{title:"底薪",key:"salary",align:"center",width:218},{title:"状态",key:"stateDes",align:"center",width:230,render:function(e){return'<span class="'+("1"==e.state?"":"curr")+'">'+e.stateDes+"</span>"}},{title:"操作",key:"followTime",align:"center",className:"account-operation",width:326,render:function(e,t,o){return'<a @click="handleAccountRevamp('+o+')">修改</a>'+(1==e.state?'<a @click="handleJobState('+o+')">员工离职</a>':'<a @click="handleJobState('+o+')">启用员工</a>')+'<a @click="handleAccountResetPwd('+o+')">重置密码</a>'}}],totalPage:0,personId:0,userName:"",employeeForm:{realName:"",mobile:"",sex:"男",salary:"",pwd:"",mercharType:"operator",itemTypes:[],bossType:2},getListCondition:{orderBy:"state asc,createTime desc",startPage:1,pageSize:10},showResetPwdDialog:!1,showNewEmployeeDialog:!1,recordServiceItemType:[],revamp:!1}},methods:{insertNewEmployee:function(){var e=this,t={};t=this.employeeForm,"merchant"==this.employeeForm.mercharType?t.itemTypes=o.i(s.i)([]):t.itemTypes=o.i(s.i)(this.employeeForm.itemTypes),this.$ajax(this.$joggle.merchant.employee.insert,t,!0,function(t,o){o.close(),"ZS011000"===t.code?(e.$message({duration:1200,message:t.msg}),e.showNewEmployeeDialog=!1,e.getListCondition.startPage=1,e.selectEmloyeeDates()):e.$message({type:"error",duration:1200,message:t.msg})})},updateMessage:function(e){var t=this,a={};a=e,a.itemTypes&&("merchant"==a.mercharType?a.itemTypes=o.i(s.i)([]):a.itemTypes=o.i(s.i)(this.employeeForm.itemTypes)),this.$ajax(this.$joggle.merchant.employee.update,JSON.stringify(a),!0,function(e,o){o.close(),"ZS011000"==e.code?(t.$message({duration:1200,message:e.msg}),t.showNewEmployeeDialog=!1,t.selectEmloyeeDates()):t.$message({type:"error",duration:1200,message:e.msg})})},selectEmloyeeDates:function(){var e=this;this.$ajax(this.$joggle.merchant.employee.selectByPage,this.getListCondition,!0,function(t,o){o.close(),"ZS011000"==t.code?(e.datas=t.data.list,e.totalPage=t.data.total):e.$message({type:"error",duration:1200,message:t.msg})})},handleShowDialog:function(){this.recoverForm(),this.revamp=!1,this.showNewEmployeeDialog=!0},handleInsertEmployee:function(){var e=/([a-zA-Z]+[0-9]+)|([0-9]+[a-zA-Z]+)/g,t=/^\d+(\.\d+)?$/,a="";if(o.i(s.c)(this.employeeForm.realName)?a="请输入员工姓名":o.i(s.c)(this.employeeForm.mobile)?a="请输入手机号":o.i(s.c)(this.employeeForm.pwd)&&0==this.revamp?a="请输入登录密码":"operator"==this.employeeForm.mercharType&&o.i(s.c)(this.employeeForm.itemTypes)?a="请至少选择一项开单项目":o.i(s.j)(this.employeeForm.mobile)?e.test(this.employeeForm.pwd)||0!=this.revamp?o.i(s.c)(this.employeeForm.salary)||t.test(this.employeeForm.salary)||(a="您输入的底薪有误"):a="请输入字母或数字组合密码":a="请输入正确手机号",""!=a)return this.$message({type:"error",duration:1e3,message:a}),!1;if(this.revamp){var i={};i=Object.assign({},this.employeeForm),i.id=this.personId,delete i.pwd,this.updateMessage(i)}else this.insertNewEmployee()},handleAccountRevamp:function(e){this.leadingForm(e),this.revamp=!0,this.showNewEmployeeDialog=!0},handleJobState:function(e){var t=this.datas[e],o={};o.id=t.id,o.state=1==t.state?o.state=2:o.state=1,this.updateMessage(o)},handleAccountResetPwd:function(e){this.recoverForm();var t=this.datas[e];this.userName=t.userName,this.personId=t.id,this.showResetPwdDialog=!0},handleChangePwd:function(){var e=/([a-zA-Z]+[0-9]+)|([0-9]+[a-zA-Z]+)/g,t={};if(!e.test(this.employeeForm.pwd))return void this.dislogMessage("请输入字母或数字组合账号");t.id=this.personId,t.pwd=this.employeeForm.pwd,this.showResetPwdDialog=!1,this.updateMessage(t)},recoverForm:function(){this.employeeForm.realName="",this.employeeForm.mobile="",this.employeeForm.sex="男",this.employeeForm.salary="",this.employeeForm.pwd="",this.employeeForm.mercharType="operator",this.employeeForm.itemTypes=["1","2","3","4","5"]},leadingForm:function(e){var t=this.datas[e];this.employeeForm.realName=t.realName,this.employeeForm.mobile=t.mobile,this.employeeForm.sex=t.sex,this.employeeForm.salary=t.salary,this.employeeForm.mercharType=t.mercharType,this.personId=t.id,this.employeeForm.itemTypes="operator"==t.mercharType?o.i(s.k)(t.itemTypes):["1","2","3","4","5"]},recoverForm:function(){this.employeeForm.realName="",this.employeeForm.mobile="",this.employeeForm.sex="男",this.employeeForm.salary="",this.employeeForm.pwd="",this.employeeForm.mercharType="operator",this.employeeForm.itemTypes=["1","2","3","4","5"]},handlePageNum:function(e){this.getListCondition.startPage=e,this.selectEmloyeeDates()},handlePageSize:function(e){this.getListCondition.startPage=1,this.getListCondition.pageSize=e,this.selectEmloyeeDates()},dislogMessage:function(e){this.$message({message:e})}},created:function(){var e=this;this.selectEmloyeeDates();var t={codeTypes:"ServiceItemType"};this.$ajax(this.$joggle.mzscp.selectConstantTypes,JSON.stringify(t),!1,function(t){"ZS011000"==t.code?e.recordServiceItemType=t.data.ServiceItemType:e.$message({type:"error",duration:1200,message:t.msg})})},mounted:function(){}}},227:function(e,t,o){function s(e){o(406)}var a=o(0)(o(133),o(321),s,null,null);e.exports=a.exports},228:function(e,t,o){function s(e){o(386)}var a=o(0)(o(134),o(291),s,null,null);e.exports=a.exports},291:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"employee"},[o("div",{staticClass:"employee-content"},[o("zs-button",{attrs:{type:"primary"},on:{click:e.handleShowDialog}},[e._v("新建员工")]),e._v(" "),o("div",{staticClass:"list-content"},[o("zs-table",{staticClass:"employee-table",attrs:{data:e.datas,columns:e.columns,context:e.context,"no-data-colspan":6,border:""}})],1),e._v(" "),e.datas.length>0?o("div",{staticClass:"page-div"},[o("zs-pagination",{attrs:{current:e.getListCondition.startPage,total:e.totalPage,"page-size":e.getListCondition.pageSize,"show-totalPage":"","show-elevator":"","show-sizer":""},on:{"on-change":e.handlePageNum,"on-page-size-change":e.handlePageSize}})],1):e._e(),e._v(" "),o("zs-dialog",{staticClass:"em-dialog",attrs:{"show-close":""},model:{value:e.showNewEmployeeDialog,callback:function(t){e.showNewEmployeeDialog=t},expression:"showNewEmployeeDialog"}},[e.revamp?o("p",{slot:"title"},[e._v("修改员工")]):o("p",{slot:"title"},[e._v("新建员工")]),e._v(" "),o("div",{staticClass:"dialog-body"},[o("zs-form",{attrs:{model:e.employeeForm}},[o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:25,placeholder:"请输入员工姓名"},model:{value:e.employeeForm.realName,callback:function(t){e.employeeForm.realName=t},expression:"employeeForm.realName"}})],1),e._v(" "),o("li",[o("em",[e._v("*")]),e._v(" 员工姓名")])]),e._v(" "),o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:11,placeholder:"员工手机号将作为登录账号"},model:{value:e.employeeForm.mobile,callback:function(t){e.employeeForm.mobile=t},expression:"employeeForm.mobile"}})],1),e._v(" "),o("li",[o("em",[e._v("*")]),e._v(" 手机号")])]),e._v(" "),o("ul",{staticClass:"dialog-sex"},[o("li",[o("zs-radio-group",{model:{value:e.employeeForm.sex,callback:function(t){e.employeeForm.sex=t},expression:"employeeForm.sex"}},[o("zs-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),o("zs-radio",{attrs:{label:"女"}},[e._v("女")])],1)],1),e._v(" "),o("li",[e._v("性别")])]),e._v(" "),o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:10,placeholder:"请输入底薪"},model:{value:e.employeeForm.salary,callback:function(t){e.employeeForm.salary=t},expression:"employeeForm.salary"}})],1),e._v(" "),o("li",[e._v("底薪")])]),e._v(" "),e.revamp?e._e():o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:25,placeholder:"字母或者数字组合"},model:{value:e.employeeForm.pwd,callback:function(t){e.employeeForm.pwd=t},expression:"employeeForm.pwd"}})],1),e._v(" "),o("li",[o("em",[e._v("*")]),e._v(" 登录密码")])]),e._v(" "),o("ul",{staticClass:"dialog-limits"},[o("li",[o("zs-select",{staticClass:"select-form__select",attrs:{placeholder:"请选择员工"},on:{change:function(e){}},model:{value:e.employeeForm.mercharType,callback:function(t){e.employeeForm.mercharType=t},expression:"employeeForm.mercharType"}},[o("zs-option",{attrs:{value:"merchant",label:"管理员"}}),e._v(" "),o("zs-option",{attrs:{value:"operator",label:"操作员"}})],1)],1),e._v(" "),o("li",[o("em",[e._v("*")]),e._v(" 项目权限")])]),e._v(" "),"operator"==e.employeeForm.mercharType?o("ul",[o("li",[o("zs-checkbox-group",{model:{value:e.employeeForm.itemTypes,callback:function(t){e.employeeForm.itemTypes=t},expression:"employeeForm.itemTypes"}},e._l(e.recordServiceItemType,function(t,s){return o("zs-checkbox",{key:s,attrs:{label:t[0]}},[e._v(e._s(t[1])+"\n                                ")])}))],1),e._v(" "),o("li",[o("em",[e._v("*")]),e._v(" 开单项目")])]):e._e()])],1),e._v(" "),o("template",{slot:"footer"},[o("zs-button",{attrs:{type:"cancel"},on:{click:function(t){e.showNewEmployeeDialog=!1}}},[e._v("取消\n                ")]),e._v(" "),o("zs-button",{attrs:{type:"primary"},on:{click:e.handleInsertEmployee}},[e._v("确定\n                ")])],1)],2),e._v(" "),o("zs-dialog",{staticClass:"em-dialog",attrs:{"show-close":""},model:{value:e.showResetPwdDialog,callback:function(t){e.showResetPwdDialog=t},expression:"showResetPwdDialog"}},[o("p",{slot:"title"},[e._v("修改密码")]),e._v(" "),o("div",{staticClass:"dialog-body"},[o("zs-form",[o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:25,disabled:!0,value:e.userName}})],1),e._v(" "),o("li",[e._v("登录账号")])]),e._v(" "),o("ul",{staticClass:"dialog-input"},[o("li",[o("zs-input",{attrs:{maxlength:25,placeholder:"请输入新密码"},model:{value:e.employeeForm.pwd,callback:function(t){e.employeeForm.pwd=t},expression:"employeeForm.pwd"}})],1),e._v(" "),o("li",[e._v("密码")])])])],1),e._v(" "),o("template",{slot:"footer"},[o("zs-button",{attrs:{type:"cancel"},on:{click:function(t){e.showResetPwdDialog=!1}}},[e._v("取消\n                ")]),e._v(" "),o("zs-button",{attrs:{type:"primary"},on:{click:e.handleChangePwd}},[e._v("确定\n                ")])],1)],2)],1)])},staticRenderFns:[]}},321:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"workorder-page"},[o("ma-head",{attrs:{currId:4}}),e._v(" "),o("zs-breadcrumb",[o("zs-breadcrumb-item",[e._v("员工")])],1),e._v(" "),o("list",{tag:"component"})],1)},staticRenderFns:[]}},386:function(e,t){},40:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o(2),a=o(227),i=o.n(a),l=o(5),r=(o.n(l),o(3),o(4));s.a.use(r.a),new s.a({el:"#app",render:function(e){return e(i.a)}})},406:function(e,t){},450:function(e,t,o){e.exports=o(40)}},[450]);