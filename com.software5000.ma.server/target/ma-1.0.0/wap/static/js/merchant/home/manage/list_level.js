webpackJsonp([35],{163:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t(2),n=t(6),i=t.n(n);s.default={components:{maHead:i.a},data:function(){return{isLoading:!1,formDatas:[],formDatasIndex:0,hasNextPage:!1,startPage:1,pageSize:10,revamp:!1,newProjectPage:!1,lvlName:"",rechargeMoney:"",presonMsg:[]}},methods:{insertNewMemberLv:function(){var e=this,s={lvlName:this.lvlName,rechargeMoney:this.rechargeMoney};this.$ajax(this.$joggle.business.insertMemberLvl,s,!0,function(s,t){"ZS011000"===s.code?(e.newProjectPage=!1,e.selectGetFormDatas(!1),e.$message({type:"success",message:s.msg,duration:1200})):(t.close(),e.$message({type:"error",message:s.msg}))})},updateRemainMemberLv:function(){var e=this;this.$ajax(this.$joggle.business.updateMemberLvl,this.presonMsg,!0,function(s,t){t.close(),"ZS011000"===s.code?(Object.assign(e.formDatas[e.formDatasIndex],e.presonMsg),e.newProjectPage=!1,e.$message({type:"success",message:s.msg,duration:1200})):(e.newProjectPage||(e.formDatas[e.formDatasIndex].state=1==e.presonMsg.state?2:1,e.formDatas[e.formDatasIndex]._do=!e.presonMsg._do),e.$message({type:"error",message:s.msg}))})},selectGetFormDatas:function(e){var s=this;e?this.startPage++:this.startPage=1,this.$ajax(this.$joggle.business.selectMemberLvlList,{startPage:this.startPage,pageSize:this.pageSize},!0,function(t,a){if(a.close(),"ZS011000"==t.code){var n=e?s.formDatas.concat(t.data.list):t.data.list;n.forEach(function(e){s.$set(e,"_do",1==e.state)}),s.formDatas=n,s.hasNextPage=t.data.hasNextPage}else s.$message({type:"error",duration:1200,message:t.msg})})},handleJudge:function(){var e="";if(t.i(a.c)(this.lvlName)?e="请输入等级名称":t.i(a.c)(this.rechargeMoney)?e="请输入充值金额":(!Number(this.rechargeMoney)||Number(this.rechargeMoney)<=0)&&(e="请输入正确的充值金额"),""!=e)return this.$message({type:"error",duration:1e3,message:e}),!1;this.rechargeMoney=Number(this.rechargeMoney).toFixed(2),this.revamp?(this.presonMsg.lvlName=this.lvlName,this.presonMsg.rechargeMoney=this.rechargeMoney,this.updateRemainMemberLv()):this.insertNewMemberLv()},handleNewProject:function(){this.newProjectPage=!0,this.lvlName="",this.rechargeMoney=""},handleEditMsg:function(e){var s=Object.assign({},this.formDatas[e]);this.formDatasIndex=e,this.presonMsg=s,this.lvlName=s.lvlName,this.rechargeMoney=s.rechargeMoney,this.revamp=!0,this.newProjectPage=!0},handleSwitchBtn:function(e){var s=Object.assign({},this.formDatas[e]);this.formDatasIndex=e,s.state=1==s.state?2:1,this.presonMsg=s,this.updateRemainMemberLv()},handleShowMore:function(){if(this.hasNextPage){var e=this.$loading();this.selectGetFormDatas(!0,function(){e.close()})}},handleGoHome:function(){t.i(a.d)("/wap/merchant/home/manage/index.html")}},created:function(){this.selectGetFormDatas(!1)}}},238:function(e,s,t){t(352);var a=t(0)(t(163),t(275),null,null);e.exports=a.exports},275:function(e,s){e.exports={render:function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"level-page"},[t("ma-head",{on:{"home-click":e.handleGoHome}},[e._v("会员等级"),t("span",{staticClass:"new-project",on:{click:e.handleNewProject}},[e._v("新建会员等级")])]),e._v(" "),t("div",{staticClass:"record-body"},[e.formDatas.length>0?t("ul",{staticClass:"record-ul"},[e._l(e.formDatas,function(s,a){return t("li",{key:a},[t("div",{staticClass:"row-one"},[t("div",{staticClass:"vip"},[t("zs-icon",{attrs:{icon:"member",size:"17",text:s.lvlName}})],1),e._v(" "),t("div",{staticClass:"cost"},[e._v("单次充值："+e._s(s.rechargeMoney||0))])]),e._v(" "),t("div",{staticClass:"row-two"},[t("zs-switch",{staticClass:"switch-btn",on:{change:function(s){e.handleSwitchBtn(a)}},model:{value:s._do,callback:function(e){s._do=e},expression:"item._do"}}),e._v(" "),s._do?t("span",{staticClass:"switch-h3"},[e._v("启用")]):t("span",{staticClass:"switch-h4"},[e._v("停用")]),e._v(" "),t("zs-icon",{staticClass:"make",attrs:{icon:"write",text:"编辑",size:"12"},on:{click:function(s){e.handleEditMsg(a)}}})],1)])}),e._v(" "),t("div",{staticClass:"show_all_css",class:[{show_more_css:e.hasNextPage}],on:{click:e.handleShowMore}},[e._v(e._s(e.hasNextPage?"查看更多":"已显示全部")+"\n            ")])],2):t("div",[e._m(0)])]),e._v(" "),t("zs-slide-page",{staticClass:"ProjectPage",attrs:{title:1==e.revamp?"修改会员等级":"新建会员等级"},on:{"go-home":e.handleGoHome},model:{value:e.newProjectPage,callback:function(s){e.newProjectPage=s},expression:"newProjectPage"}},[t("div",{staticClass:"newProject-page"},[t("div",{staticClass:"new-body"},[t("ul",[t("li",[t("div",{staticClass:"li-title"},[t("em",[e._v("*")]),e._v(" 等级名称")]),e._v(" "),t("zs-input",{attrs:{maxlength:10,placeholder:"请输入会员等级名称"},model:{value:e.lvlName,callback:function(s){e.lvlName=s},expression:"lvlName"}})],1),e._v(" "),t("li",[t("div",{staticClass:"li-title"},[t("em",[e._v("*")]),e._v(" 单次充值")]),e._v(" "),t("zs-input",{attrs:{maxlength:25,placeholder:"请输入该等级单次充值金额"},model:{value:e.rechargeMoney,callback:function(s){e.rechargeMoney=s},expression:"rechargeMoney"}})],1)])]),e._v(" "),t("div",{staticClass:"new-bottom"},[t("zs-button",{staticClass:"btn-click",attrs:{type:"primary"},on:{click:e.handleJudge}},[e._v("确定")])],1)])])],1)},staticRenderFns:[function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("ul",{staticClass:"data-empty"},[t("li",[e._v("暂无会员等级信息")])])}]}},352:function(e,s){},469:function(e,s,t){e.exports=t(66)},66:function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=t(1),n=t(238),i=t.n(n),o=t(5),r=(t.n(o),t(3),t(4));a.a.use(r.a),new a.a({el:"#app",render:function(e){return e(i.a)}})}},[469]);