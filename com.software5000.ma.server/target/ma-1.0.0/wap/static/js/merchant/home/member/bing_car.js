webpackJsonp([27],{171:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t(2),s=(t(12),t(6)),i=t.n(s),n=t(9),o=t.n(n),c=t(17);r.default={components:{maHead:i.a,carNumber:o.a,list:c.a},data:function(){return{isLoading:!1,isEdit:!1,carNumber:"",carList:[],userId:"",recordId:""}},computed:{},methods:{handleGoHome:function(){t.i(a.d)("/wap/merchant/home/workorder/list.html")},handleGetCarNumber:function(e){this.carNumber=e,e.length<7||t.i(a.h)(e)||this.$message({type:"error",message:"车牌号码有误!"})},getMemberData:function(){var e=this;this.$ajax(this.$joggle.merchant.member.selectMemberDetailInfo,{memberLvlRecordId:this.recordId},!0,function(r,s){s.close(),"ZS011000"===r.code?(e.userId=r.data.userId,e.carList=r.data.user.cars):(e.$message({type:"error",message:r.msg,duration:1200}),setTimeout(function(){t.i(a.d)("/web/merchant/home/member/manage.html")},1200))})},delCarNum:function(e,r){var t=this;this.$confirm({message:"是否删除该车牌号？"}).then(function(){if(t.carList.length<2)return void t.$message({type:"error",message:"至少需留1辆车",duration:1200});var a={userId:t.userId,carNumber:r.carNumber};t.$ajax(t.$joggle.merchant.member.updateCarStateByParam,JSON.stringify(a),!0,function(r,a){a.close(),"ZS011000"===r.code?(t.carList.splice(e,1),t.$modal({type:"success",message:"删除成功",duration:"1000"})):t.$modal({type:"error",message:r.msg,duration:1e3})})}).catch(function(){})},addCarNum:function(){var e=this;if(!t.i(a.h)(this.carNumber))return void this.$modal({type:"error",message:"请完善车牌号",duration:"1000"});if(this.carList.length>9)return void this.$modal({type:"error",message:"最多添加10辆车",duration:"1000"});for(var r=0;r<this.carList.length;r++)if(e.carList[r]==e.carNumber)return e.$modal({type:"error",message:"该车已添加",duration:"1000"}),void(e.$refs.refCarNumber.currNum="");var s={userId:this.userId,carNumber:this.carNumber};this.$ajax(this.$joggle.merchant.member.insertCarNumberByParam,JSON.stringify(s),!0,function(r,t){t.close(),"ZS011000"===r.code?r.data?(e.carList=e.carList.concat(r.data),e.$modal({type:"success",message:"添加成功",duration:1e3})):e.$modal({type:"error",message:"该车牌号已绑定",duration:1e3}):e.$modal({type:"error",message:r.msg,duration:1e3})})}},created:function(){this.recordId=t.i(a.a)("recordId"),this.getMemberData()}}},246:function(e,r,t){t(399);var a=t(0)(t(171),t(330),null,null);e.exports=a.exports},330:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isLoading,expression:"!isLoading"}],staticClass:"workorder-page"},[t("ma-head",{on:{"home-click":e.handleGoHome}},[e._v("添加车牌号")]),e._v(" "),e.isEdit?t("div",{staticClass:"car-number-show"},[t("zs-icon",{attrs:{icon:"car",size:"20",text:"服务车辆"}}),e._v("\n        "+e._s(this.finalData.carNumber)+"\n    ")],1):t("car-number",{attrs:{"photo-icon":""},on:{"get-car-number":e.handleGetCarNumber}}),e._v(" "),t("div",[t("div",{staticClass:"save-add"},[t("zs-button",{attrs:{type:"primary",size:"large"},on:{click:e.addCarNum},slot:"left"},[e._v("添加")])],1)]),e._v(" "),t("div",{staticClass:"div_item"},e._l(e.carList,function(r,a){return t("list",{key:a,attrs:{height:65}},[t("div",{staticClass:"create__item__plate-number",slot:"left"},[t("span",[e._v(e._s(r.carNumber.substring(0,2))+" "+e._s(r.carNumber.substring(2)))])]),e._v(" "),t("div",{on:{click:function(t){e.delCarNum(a,r)}},slot:"right"},[t("zs-icon",{attrs:{icon:"cross",size:12}})],1)])}))],1)},staticRenderFns:[]}},399:function(e,r){},477:function(e,r,t){e.exports=t(74)},74:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t(1),s=t(246),i=t.n(s),n=t(5),o=(t.n(n),t(4));a.a.use(o.a),new a.a({el:"#app",render:function(e){return e(i.a)}})}},[477]);