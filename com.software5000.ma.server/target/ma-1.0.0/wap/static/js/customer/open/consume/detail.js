webpackJsonp([48],{146:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(6),s=i.n(a),n=i(29),c=i.n(n),o=i(2),r=i(7);e.default={components:{maHead:s.a,swiper:c.a},props:[],data:function(){return{isLoading:!0,id:"",detailData:{},images:[],imageViewVisible:!1,imageIndex:0,couponShow:[]}},computed:{showBusinessDeduct:function(){return this.detailData.businessDeduct&&this.detailData.businessDeduct>0},isFinish:function(){return 4==this.detailData.state},isNopay:function(){return 3==this.detailData.state},materialCost:function(){return this.detailData.materialCost?parseFloat(this.detailData.materialCost).toFixed(2):0},businessDeduct:function(){return parseFloat(this.detailData.businessDeduct).toFixed(2)},payType:function(){return["","cash-pay","wechat-pay"][this.detailData.payType]},payTypeText:function(){return["","现金支付","微信支付"][this.detailData.payType]},showCouponDeduct:function(){return this.detailData.couponDeduct&&this.detailData.couponDeduct>0},showDiscount:function(){return this.detailData.discountDeduct&&this.detailData.discountDeduct>0},couponDeduct:function(){return parseFloat(this.detailData.couponDeduct).toFixed(2)}},methods:{selectConsumeDetail:function(t){var e=this;this.$ajax(this.$joggle.customer.consume.selectConsumeDetailById,{orderId:this.id},!0,function(i,a){if("ZS011000"===i.code){e.detailData=i.data.workOrder;var s=e.detailData.workOrderImgs||[],n=[];s.forEach(function(t){n.push({id:t.id,showImg:t.orderImgSrc})}),e.images=n;for(var c=e.detailData.couponUuid.split(","),o=e.detailData.couponName.split(","),r=e.detailData.couponEveryDeduct.split(","),l=0,d=c.length;l<d;l++)e.couponShow.push({couponUuid:c[l],couponName:o[l],couponDeduct:r[l]});a.close(),t&&t()}else e.$message({type:"error",message:i.msg})})},handleViewPic:function(t){this.imageViewVisible=!0,this.imageIndex=t},handleStateTypeIcon:function(t){return["","serving2","serving2","nopay2","finish2"][t]},handleStateTypeText:function(t){return["","未完工","未完工","待支付","已完工"][t]},handleStateTypeClass:function(t){return["","serving-cls","serving-cls","nopay-cls","finish-cls"][t]},handleSetOriginalTotalPrice:function(){var t=0;return(this.detailData.workOrderDetails||[]).forEach(function(e){t+=e.totalPrice}),parseFloat(t).toFixed(2)},handleTurnToUserCenter:function(){i.i(r.a)("/wap/open/customer/detail_user.html","emkt")}},created:function(){var t=this;this.id=i.i(o.a)("id")||"",i.i(o.c)(this.id)?this.$message({type:"error",message:"数据不存在"}):this.selectConsumeDetail(function(){t.isLoading=!1})}}},221:function(t,e,i){i(402);var a=i(0)(i(146),i(333),null,null);t.exports=a.exports},333:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"consume-detail-page"},[i("div",{staticClass:"manage-header"},[i("div",[i("ma-head",{attrs:{home:!1,"right-icon-text":"个人中心"},on:{"right-icon-click":t.handleTurnToUserCenter}},[t._v("消费详情\n            ")])],1),t._v(" "),i("div",{staticClass:"detail-head"},[i("zs-icon",{class:t.handleStateTypeClass(t.detailData.state),attrs:{icon:t.handleStateTypeIcon(t.detailData.state),"icon-dis":"15",size:"40",text:t.handleStateTypeText(t.detailData.state)}}),t._v(" "),i("p",{staticClass:"car-number"},[t._v("服务车辆："+t._s(t.detailData.carNumber))])],1)]),t._v(" "),i("ul",{staticClass:"detail-info page-margin"},[i("li",{staticClass:"info-title"},[t._v("服务项目")]),t._v(" "),t._l(t.detailData.workOrderDetails,function(e){return i("li",{key:e.id,staticClass:"info-service"},[i("div",{staticClass:"info-service-p1"},[t._v("\n                "+t._s(e.serviceItemName)+" "),i("i",[t._v("x"+t._s(e.itemsTimes))]),t._v(" "),e.usePackageTimes>0?i("span",{staticClass:"user-card"},[t._v("用卡 x"+t._s(e.usePackageTimes))]):t._e(),t._v(" "),i("span",{staticClass:"price"},[t._v("￥"+t._s(e.salePrice))])]),t._v(" "),e.couponDeduct>0?i("div",{staticClass:"info-service-p2"},[t._v("\n                卡券抵扣 "),i("i",[t._v("("+t._s(e.couponName)+")")]),t._v(" "),i("span",{staticClass:"price"},[t._v("- ￥"+t._s(e.couponDeduct))])]):t._e(),t._v(" "),e.discountPrice>0?i("div",{staticClass:"info-service-p3"},[t._v("\n                会员扣减\n                "),i("span",{staticClass:"price"},[t._v("- ￥"+t._s(e.discountPrice))])]):t._e(),t._v(" "),i("div",{staticClass:"info-service-p4"},[t._v("\n                总价\n                "),i("span",{staticClass:"price"},[t._v(" ￥"+t._s(e.totalPrice))])])])}),t._v(" "),i("li",{staticClass:"info-service-sum"},[t._v("\n            项目合计金额 "),i("span",[t._v("￥"+t._s(t.handleSetOriginalTotalPrice()))])]),t._v(" "),t.materialCost>0?i("li",{staticClass:"info-material"},[i("zs-icon",{attrs:{icon:"附","icon-background":"#e75845",size:"16","icon-dis":"10",text:"附加费用"}}),t._v(" "),i("span",{staticClass:"price"},[t._v("￥"+t._s(t.materialCost))])],1):t._e(),t._v(" "),t.showBusinessDeduct?i("li",{staticClass:"info-finish first"},[i("zs-icon",{attrs:{icon:"减","icon-background":"#2cc068",size:"16","icon-dis":"10",text:"商家扣减"}}),t._v(" "),i("span",{staticClass:"info-deduct"},[t._v("-￥"+t._s(t.businessDeduct))])],1):t._e(),t._v(" "),t.detailData.balanceDeduct?i("li",{staticClass:"info-finish first"},[i("zs-icon",{attrs:{icon:"会","icon-background":"#4b8dde",size:"16","icon-dis":"10",text:"会员余额支付"}}),t._v(" "),i("span",{staticClass:"info-deduct"},[t._v("-￥"+t._s(t.detailData.balanceDeduct))])],1):t._e(),t._v(" "),t.isFinish?[t.showDiscount?i("li",{staticClass:"info-finish"},[i("zs-icon",{attrs:{icon:"折","icon-background":"#04c668",size:"16","icon-dis":"10",text:"会员折扣"}}),t._v(" "),i("span",{staticClass:"info-discount-num"},[t._v(t._s(t.detailData.discountNum)+"折")]),t._v(" "),i("span",{staticClass:"info-deduct"},[t._v("-￥"+t._s(t.detailData.discountDeduct||0))])],1):t._e(),t._v(" "),t.showCouponDeduct?t._l(t.couponShow,function(e){return e.couponDeduct>0?i("li",{staticClass:"info-finish"},[i("zs-icon",{attrs:{icon:"券","icon-background":"#50b6f0",size:"16","icon-dis":"10",text:e.couponName||"优惠券"}}),t._v(" "),i("span",{staticClass:"info-deduct"},[t._v("-￥"+t._s(e.couponDeduct))])],1):t._e()}):t._e()]:t._e(),t._v(" "),i("li",{staticClass:"info-sum"},[t.isFinish?i("zs-icon",{attrs:{icon:t.payType,size:"18",text:t.payTypeText}}):i("span",[t._v("总金额")]),t._v(" "),i("span",{staticClass:"info-sum-price"},[t._v("￥"+t._s(t.detailData.totalPrice))])],1)],2),t._v(" "),i("div",{staticClass:"detail-image page-margin"},[i("p",{staticClass:"image-title"},[t._v("施工图片")]),t._v(" "),t.detailData.workOrderImgs&&t.detailData.workOrderImgs.length>0?i("ul",{staticClass:"image-wrap"},t._l(t.detailData.workOrderImgs,function(e){return i("li",{on:{click:function(e){t.handleViewPic(t.index)}}},[i("i",{style:{backgroundImage:"url("+e.orderImgSrc+")"}})])})):i("p",{staticClass:"image-empty"},[t._v("未上传图片")])]),t._v(" "),i("div",{staticClass:"detail-other page-margin"},[i("p",[t._v("工单编号"),i("span",[t._v(t._s(t.detailData.orderNo))])]),t._v(" "),i("p",[t._v("新建时间"),i("span",[t._v(t._s(t.detailData.createTime?t.detailData.createTime.slice(0,19):""))])]),t._v(" "),t.isNopay?i("p",[t._v("完工时间"),i("span",[t._v(t._s(t.detailData.commitTime?t.detailData.commitTime.slice(0,19):""))])]):t._e(),t._v(" "),t.isFinish?i("p",[t._v("支付时间"),i("span",[t._v(t._s(t.detailData.payTime?t.detailData.payTime.slice(0,19):""))])]):t._e()]),t._v(" "),i("swiper",{attrs:{images:t.images,index:t.imageIndex},model:{value:t.imageViewVisible,callback:function(e){t.imageViewVisible=e},expression:"imageViewVisible"}})],1)},staticRenderFns:[]}},402:function(t,e){},452:function(t,e,i){t.exports=i(49)},49:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(1),s=i(221),n=i.n(s),c=i(5),o=(i.n(c),i(4));i(3);a.a.use(o.a),new a.a({el:"#app",render:function(t){return t(n.a)}})}},[452]);