webpackJsonp([12],{161:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(256),i=a.n(s),r=a(6),c=a.n(r);e.default={components:{billing:i.a,maHead:c.a},data:function(){return{}},computed:{},methods:{}}},162:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1);e.default={name:"billing",data:function(){return{id:"",orderData:{businessPackage:{packageName:"",packageAndItems:[]},user:{mobile:"",realName:"",cars:[]}},orderTimer:"",cashPayDialog:!1,weChatPayDialog:!1}},watch:{weChatPayDialog:function(t){t||clearInterval(this.orderTimer)}},methods:{updateCashPay:function(){var t=this;this.$ajax(this.$joggle.merchant.member.updateRechargeOrderState,{id:this.id},!0,function(e,a){"ZS011000"===e.code?(t.selectData(),t.cashPayDialog=!1,t.$message({type:"success",message:e.msg})):(a.close(),t.$message({type:"error",message:e.msg}))})},selectData:function(){var t=this;this.$ajax(this.$joggle.merchant.member.selectRechargeOrderById,{id:this.id},!0,function(e,a){a.close(),"ZS011000"===e.code?e.data?t.orderData=e.data:(t.$message({type:"error",message:"该订单不存在",duration:1200}),setTimeout(function(){history.go(-1)},1200)):t.$message({type:"error",message:e.msg,duration:1200})})},selectBarCode:function(){var t=this;a.i(s.e)(this.$joggle.merchant.member.selectRechargeOrderDeskPay+"?rechargeOrderId="+this.id+"&t="+(new Date).getTime(),function(e){t.$refs.barCodeWrap.innerHTML="",t.$refs.barCodeWrap.appendChild(e),clearInterval(t.orderTimer),t.orderTimer=setInterval(function(){t.selectIsPaySuccess(function(){t.weChatPayDialog=!1,clearInterval(t.orderTimer),t.$message({type:"success",message:"支付成功",duration:1200})})},2e3)})},selectIsPaySuccess:function(t,e){var a=this;this.$ajax(this.$joggle.merchant.member.selectRechargeOrderById,{id:this.id},!1,function(s){"ZS011000"===s.code?2==s.data.state?(a.orderData=s.data,t&&t()):e&&e():a.$message({type:"error",message:s.msg,duration:1200})})},handleWeChatPayDialog:function(){this.weChatPayDialog=!0,this.selectBarCode()}},created:function(){this.id=a.i(s.f)("id"),this.selectData()}}},255:function(t,e,a){function s(t){a(432)}var i=a(0)(a(161),a(367),s,null,null);t.exports=i.exports},256:function(t,e,a){function s(t){a(410)}var i=a(0)(a(162),a(326),s,null,null);t.exports=i.exports},326:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-main billing"},[s("div",{staticClass:"list"},[s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("手机号")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.mobile||" ")+"\n            ")])]),t._v(" "),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("姓名")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.user.realName||" ")+"\n            ")])]),t._v(" "),s("div",{staticClass:"list-item list-item-cars"},[s("div",{staticClass:"list-item-text"},[t._v("绑定车牌")]),t._v(" "),s("div",{staticClass:"member-cars"},t._l(t.orderData.user.cars,function(e,a){return s("div",{key:a,staticClass:"car-num"},[s("p",[t._v(t._s(e.carNumber.slice(0,2))),s("span",{staticClass:"spot"},[t._v("·")]),t._v(t._s(e.carNumber.slice(2)))])])}))]),t._v(" "),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("充值金额")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.reChargeMoney||" ")+"\n            ")])]),t._v(" "),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("赠送金额")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.grantMoney||0)+"\n            ")])]),t._v(" "),s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("下单时间")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.createTime)+"\n            ")])]),t._v(" "),2==t.orderData.state?s("div",{staticClass:"list-item"},[s("div",{staticClass:"list-item-text"},[t._v("收款时间")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.updateTime)+"\n            ")])]):t._e(),t._v(" "),s("div",{staticClass:"list-item list-item-last"},[s("div",{staticClass:"list-item-text"},[t._v("订单编号")]),t._v(" "),s("div",{staticClass:"list-item-con"},[t._v("\n                "+t._s(t.orderData.orderNumber)+"\n            ")])]),t._v(" "),1==t.orderData.state?s("div",{staticClass:"page-main-button"},[s("zs-button",{attrs:{type:"primary"},on:{click:function(e){t.cashPayDialog=!0}}},[s("zs-icon",{attrs:{icon:"cash",text:"现金收款",size:22}})],1),t._v(" "),s("zs-button",{attrs:{type:"success"},on:{click:t.handleWeChatPayDialog}},[s("zs-icon",{attrs:{icon:"wechat",text:"微信收款",size:22}})],1)],1):t._e(),t._v(" "),2==t.orderData.state?s("div",{staticClass:"page-main-pay"},[s("zs-icon",{attrs:{icon:1==t.orderData.payType?"money":"wechat2",size:20,text:1==t.orderData.payType?"现金收款":"微信收款"}}),t._v(" "),s("span",{staticClass:"bold"},[t._v("￥"+t._s(t.orderData.reChargeMoney))])],1):t._e()]),t._v(" "),s("zs-dialog",{staticClass:"cash-pay-dialog",model:{value:t.cashPayDialog,callback:function(e){t.cashPayDialog=e},expression:"cashPayDialog"}},[s("span",{slot:"title"},[t._v("现金收款")]),t._v(" "),s("div",[s("p",{staticClass:"money-pay"},[t._v("￥"+t._s(t.orderData.reChargeMoney))]),t._v(" "),s("p",[t._v("请收到现金后点击“确认收款”")])]),t._v(" "),s("span",{staticClass:"dialog-footer",slot:"footer"},[s("zs-button",{attrs:{type:"cancel"},on:{click:function(e){t.cashPayDialog=!1}}},[t._v("取消")]),t._v(" "),s("zs-button",{attrs:{type:"primary"},on:{click:t.updateCashPay}},[t._v("确认收款")])],1)]),t._v(" "),s("zs-dialog",{staticClass:"weChat-Pay-dialog",model:{value:t.weChatPayDialog,callback:function(e){t.weChatPayDialog=e},expression:"weChatPayDialog"}},[s("span",{slot:"title"},[t._v("微信收款")]),t._v(" "),s("div",[s("p",{staticClass:"money-pay"},[t._v("￥"+t._s(t.orderData.reChargeMoney))]),t._v(" "),s("div",{ref:"barCodeWrap",staticClass:"pay-code"},[s("img",{staticClass:"pay-pop-loading",attrs:{src:a(18)}})])])])],1)},staticRenderFns:[]}},367:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workorder-page"},[a("ma-head"),t._v(" "),a("zs-breadcrumb",[a("zs-breadcrumb-item",{attrs:{to:"/web/merchant/home/recharge/update.html?curr=2"}},[t._v("充值记录")]),t._v(" "),a("zs-breadcrumb-item",[t._v("充值详情")])],1),t._v(" "),a("billing",{tag:"component"})],1)},staticRenderFns:[]}},410:function(t,e){},432:function(t,e){},463:function(t,e,a){t.exports=a(53)},53:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(2),i=a(255),r=a.n(i),c=a(5),n=(a.n(c),a(3),a(4));s.a.use(n.a),new s.a({el:"#app",render:function(t){return t(r.a)}})}},[463]);