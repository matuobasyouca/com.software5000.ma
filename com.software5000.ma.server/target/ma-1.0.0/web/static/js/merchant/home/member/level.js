webpackJsonp([19],{155:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(7),i=a.n(s),n=a(251),r=a.n(n),c=a(6),o=a.n(c);e.default={components:{maHead:o.a,merchant:r.a,tab:i.a},data:function(){return{tabCurrent:1,tabs:["商家套餐","诚品合作套餐"]}},computed:{componentCurr:function(){return[r.a][this.tabCurrent-1]}},methods:{handleTab:function(t){this.tabCurrent=t}}}},156:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1);e.default={components:{},data:function(){return{datas:[],columns:[{title:"会员等级名称",key:"lvlName",width:266},{title:"累计消费金额",key:"totalConsume",width:356},{title:"会员折扣",key:"discount",width:242},{title:"状态",key:"state",width:184,render:function(t,e,a,s){return 1==t.state?"启用":'<span class="gray">停用</span>'}},{title:"操作",key:"state",width:205,className:"control",render:function(t,e,a,s){var i='<span @click="showRemainDialog('+a+')">修改</span>',n=1==t.state?"停用":"启用";return n='<span @click="changeState('+a+')">'+n+"</span>",""+i+n}}],context:this,currIndex:1,current:1,pageSize:10,total:0,createDialog:!1,createMemberLvData:{id:"",lvlName:"",totalConsume:"",discount:""}}},methods:{getDatas:function(t){var e=this;this.$ajax(this.$joggle.merchant.setting.selectMemberLvlList,{startPage:this.current,pageSize:this.pageSize},!0,function(a,s){s.close(),"ZS011000"===a.code?(e.total=a.data.total,e.datas=a.data.list):e.$message({type:"error",message:a.msg}),t&&t()})},handlePageChange:function(t){this.current=t;var e=this.$loading();this.getDatas(function(){e.close()})},handlePageSizeChange:function(t){this.current=1,this.pageSize=t;var e=this.$loading();this.getDatas(function(){e.close()})},showRemainDialog:function(t){this.createMemberLvData=Object.assign({},this.datas[t]),this.createDialog=!0},changeState:function(t){this.createMemberLvData=Object.assign({},this.datas[t]),this.createMemberLvData.state=1==this.createMemberLvData.state?2:1,this.remainMemberLv()},showCreateDialog:function(){var t=this;for(var e in this.createMemberLvData)t.createMemberLvData[e]="";this.createDialog=!0},certCreateLv:function(){var t=this,e={lvlName:"请输入等级名称",totalConsume:"请输入正确的累计金额",discount:"请输入正确的会员折扣"};for(var i in e){var n=t.createMemberLvData[i]+"",r="totalConsume"==i&&!n.isInReg(/^\d+(\.\d+)?$/),c=!1;if("discount"==i&&((c=!n.isInReg(/^\d+(\.\d+)?$/))||(c=parseFloat(n)>10)),a.i(s.b)(n)||r||c)return t.$message({type:"error",message:e[i],duration:1200}),!1}return!0},createLv:function(){var t=this;if(this.certCreateLv()){var e=this.createMemberLvData.discount+"";this.createMemberLvData.discount=e.indexOf(".")>-1?e.substring(0,e.indexOf(".")+2):e,this.createMemberLvData.id?this.remainMemberLv():this.$ajax(this.$joggle.merchant.businessPackage.insertMemberLvl,this.createMemberLvData,!0,function(e,a){"ZS011000"===e.code?(t.getDatas(),t.$message({type:"success",message:e.msg,duration:1200}),t.createDialog=!1):(a.close(),t.$message({type:"error",message:e.msg}))})}},remainMemberLv:function(){var t=this;this.$ajax(this.$joggle.merchant.businessPackage.updateMemberLvl,this.createMemberLvData,!0,function(e,a){"ZS011000"===e.code?(t.getDatas(),t.$message({type:"success",message:e.msg,duration:1200}),t.createDialog=!1):(a.close(),t.$message({type:"error",message:e.msg}))})}},mounted:function(){this.getDatas()}}},250:function(t,e,a){function s(t){a(407)}var i=a(0)(a(155),a(317),s,null,null);t.exports=i.exports},251:function(t,e,a){function s(t){a(430)}var i=a(0)(a(156),a(354),s,null,null);t.exports=i.exports},317:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pt manage"},[a("ma-head",{attrs:{currId:3}}),t._v(" "),a("zs-breadcrumb",[a("zs-breadcrumb-item",[t._v("会员等级")])],1),t._v(" "),a(t.componentCurr,{tag:"component"})],1)},staticRenderFns:[]}},354:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-base merchant"},[a("div",{staticClass:"merchant-top"},[a("zs-button",{attrs:{type:"primary"},on:{click:t.showCreateDialog}},[t._v("新建会员等级")])],1),t._v(" "),a("zs-table",{staticClass:"package-table",attrs:{data:t.datas,columns:t.columns,context:t.context,"no-data-colspan":10,border:""}}),t._v(" "),a("div",{staticClass:"pay_list-pagination"},[a("zs-pagination",{staticClass:"main-bottom",attrs:{current:t.current,total:t.total,"page-size-opts":[10,20,50,100],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.handlePageChange,"on-page-size-change":t.handlePageSizeChange}})],1),t._v(" "),a("zs-dialog",{staticClass:"create-dialog",model:{value:t.createDialog,callback:function(e){t.createDialog=e},expression:"createDialog"}},[a("span",{slot:"title"},[t._v(t._s(t.createMemberLvData.id?"编辑会员等级":"新建会员等级"))]),t._v(" "),a("div",{staticClass:"list"},[a("div",{staticClass:"list-item detail-list-item"},[a("div",{staticClass:"list-item-text"},[a("i",{staticClass:"request"}),t._v("等级名称")]),t._v(" "),a("div",{staticClass:"list-item-con"},[a("zs-input",{staticClass:"list-item-con-input",attrs:{maxlength:5,placeholder:"请输入会员等级名称"},model:{value:t.createMemberLvData.lvlName,callback:function(e){t.createMemberLvData.lvlName=e},expression:"createMemberLvData.lvlName"}}),t._v(" "),a("span",{staticClass:"list-item-con-input-length"},[t._v(t._s(t.createMemberLvData.lvlName.length+"/5"))])],1)]),t._v(" "),a("div",{staticClass:"list-item detail-list-item"},[a("div",{staticClass:"list-item-text"},[a("i",{staticClass:"request"}),t._v("累计消费")]),t._v(" "),a("div",{staticClass:"list-item-con"},[a("zs-input",{staticClass:"list-item-con-input",attrs:{placeholder:"请输入该等级需累计消费金额"},model:{value:t.createMemberLvData.totalConsume,callback:function(e){t.createMemberLvData.totalConsume=e},expression:"createMemberLvData.totalConsume"}})],1)]),t._v(" "),a("div",{staticClass:"list-item detail-list-item"},[a("div",{staticClass:"list-item-text"},[a("i",{staticClass:"request"}),t._v("会员折扣")]),t._v(" "),a("div",{staticClass:"list-item-con"},[a("zs-input",{staticClass:"list-item-con-input",attrs:{placeholder:"请输入0-10位，可保留一位小数"},model:{value:t.createMemberLvData.discount,callback:function(e){t.createMemberLvData.discount=e},expression:"createMemberLvData.discount"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("zs-button",{attrs:{type:"cancel"},on:{click:function(e){t.createDialog=!1}}},[t._v("取消")]),t._v(" "),a("zs-button",{attrs:{type:"primary"},on:{click:t.createLv}},[t._v("确定")])],1)])],1)},staticRenderFns:[]}},407:function(t,e){},430:function(t,e){},463:function(t,e,a){t.exports=a(51)},51:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(2),i=a(250),n=a.n(i),r=a(4),c=(a.n(r),a(5),a(3));s.a.use(c.a),new s.a({el:"#app",render:function(t){return t(n.a)}})}},[463]);