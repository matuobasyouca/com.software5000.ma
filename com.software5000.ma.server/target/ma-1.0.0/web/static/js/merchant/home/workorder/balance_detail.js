webpackJsonp([12],{175:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(271),i=a.n(s),o=a(6),n=a.n(o);e.default={components:{maining:i.a,maHead:n.a},data:function(){return{isLoading:!0}}}},176:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(1);e.default={name:"maining",data:function(){return{context:this,orderId:"",orderNo:"",carNumber:"",realName:"",mobile:"",memberRecordId:"",memberLvl:"",comment:"",materialCost:"",businessDeduct:"",payType:"",totalPrice:0,payTime:"",itemDatas:[],itemColumns:[{title:"服务项目",key:"serviceItemName",width:152},{title:"售价",width:76,render:function(t){return parseFloat(t.salePrice).toFixed(2)}},{title:"数量",key:"itemsTimes",width:64},{title:"卡券抵扣",width:198,render:function(t){return t.couponName?'<span class="use-coupon zs-coupon">'+t.couponName+" (-"+t.couponDeduct+")</span>":"/"}},{title:"会员扣减",width:82,render:function(t){return 0==t.discountPrice?0:parseFloat(t.discountPrice).toFixed(2)}},{title:"总金额",width:84,render:function(t){return 0==t.totalPrice?0:parseFloat(t.totalPrice).toFixed(2)}},{title:"派工人员",width:84,render:function(t){return t.workerName||"/"}},{title:"销售人员",width:84,render:function(t){return t.salerName||"/"}},{title:"使用套餐",key:"usePackageTimes",width:126}],discountNum:"",discountDeduct:"",couponName:"",couponUuid:"",couponDeduct:0,couponShow:[]}},computed:{itemTotalPrice:function(){var t=0;return this.itemDatas.forEach(function(e){t+=parseFloat(e.totalPrice||0)}),parseFloat(t).toFixed(2)}},methods:{selectWorkOrder:function(t,e){var i=this;this.$ajax(this.$joggle.merchant.workorder.selectWorkOrderById,{orderId:this.orderId},e,function(e,o){if("ZS011000"===e.code){var n=e.data.workOrder,c=e.data.user;a.i(s.b)(c)||c.mobile;if(a.i(s.b)(n))i.$message({type:"error",message:"工单不存在!",duration:1200});else if(4!=n.state)i.$message({type:"error",message:"该工单未结算!",duration:1200});else{i.orderNo=n.orderNo,i.carNumber=n.carNumber,i.comment=n.comment,i.mobile=n.mobile||"----",i.realName=a.i(s.b)(c)?"--":c.realName||"--",i.memberRecordId=a.i(s.b)(c)?"":c.recordId||"",i.memberLvl=a.i(s.b)(i.memberRecordId)?"非会员":c.lvlName||"普通会员",i.businessDeduct=n.businessDeduct||0,i.materialCost=n.materialCost||0,i.payType=n.payType||0,i.totalPrice=n.totalPrice||0,i.payTime=n.payTime||"",i.discountNum=n.discountNum||10,i.discountDeduct=n.discountDeduct||0,i.couponName=n.couponName?n.couponName.replace(/,/g,"， "):"",i.couponUuid=n.couponUuid||"",i.couponDeduct=n.couponDeduct||0;for(var r=n.couponUuid.split(","),u=n.couponName.split(","),d=n.couponEveryDeduct.split(","),l=0,m=r.length;l<m;l++)i.couponShow.push({couponUuid:r[l],couponName:u[l],couponDeduct:d[l]});i.itemDatas=n.workOrderDetails||[]}}else o.close(),i.$message({type:"error",message:e.msg,duraton:1200});t&&t()})}},created:function(){var t=this;if(this.orderId=a.i(s.g)("id")||"",a.i(s.b)(this.orderId))return void this.$message({type:"error",message:"工单不存在!",duration:1200});var e=this.$loading();this.selectWorkOrder(function(){e.close(),t.$emit("input",!1)},e)}}},270:function(t,e,a){function s(t){a(439)}var i=a(0)(a(175),a(368),s,null,null);t.exports=i.exports},271:function(t,e,a){function s(t){a(401)}var i=a(0)(a(176),a(309),s,null,null);t.exports=i.exports},309:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-main"},[a("ul",{staticClass:"user-detail"},[a("li",[a("span",[t._v("工单编号：")]),t._v(t._s(t.orderNo))]),t._v(" "),a("li",[a("span",[t._v("车牌：")]),t._v(t._s(t.carNumber))]),t._v(" "),a("li",[a("span",[t._v("姓名：")]),t._v(t._s(t.realName))]),t._v(" "),a("li",[a("span",[t._v("手机号：")]),t._v(t._s(t.mobile))]),t._v(" "),a("li",[a("span",[t._v("会员等级：")]),t._v(t._s(t.memberLvl))]),t._v(" "),a("li",[a("span",[t._v("备注：")]),t._v(t._s(t.comment))])]),t._v(" "),a("zs-table",{staticClass:"item-table",attrs:{data:t.itemDatas,columns:t.itemColumns,context:t.context,"no-data-colspan":7,border:""}}),t._v(" "),a("ul",{staticClass:"account-detail"},[a("li",[a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-1"},[t._v("项目费用")]),t._v(" "),a("span",{staticClass:"account-2"},[t._v(t._s(parseFloat(t.itemTotalPrice).toFixed(2)))])])]),t._v(" "),a("li",[t.materialCost>0?a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-1"},[t._v("附加费用")]),t._v(" "),a("span",{staticClass:"account-2"},[t._v(t._s(t.materialCost.toFixed(2)))])]):t._e()]),t._v(" "),a("li",[t.discountDeduct>0?a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-1"},[t._v("会员折扣（"+t._s(t.discountNum)+"折）")]),t._v(" "),a("span",{staticClass:"account-2"},[t._v("- "+t._s(t.discountDeduct.toFixed(2)))])]):t._e()]),t._v(" "),a("li",[t.businessDeduct>0?a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-1"},[t._v("商家扣减")]),t._v(" "),a("span",{staticClass:"account-2"},[t._v("- "+t._s(t.businessDeduct.toFixed(2)))])]):t._e()]),t._v(" "),t.couponDeduct>0?t._l(t.couponShow,function(e){return a("li",{key:e.couponUuid},[a("div",{staticClass:"account-detail-item account-detail-coupon"},[a("span",{staticClass:"account-1"},[t._v(t._s(e.couponName||"优惠券"))]),t._v(" "),a("span",{staticClass:"account-2"},[t._v("- "+t._s(parseFloat(e.couponDeduct).toFixed(2)))])])])}):t._e()],2),t._v(" "),a("ul",{staticClass:"account-detail"},[a("li",{staticClass:"account-sum"},[a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-2"},[t._v(t._s(["","现金收款：","微信收款："][t.payType])),a("i",[t._v("￥"+t._s(t.totalPrice.toFixed(2)))])])])]),t._v(" "),a("li",{staticClass:"balance-time"},[a("div",{staticClass:"account-detail-item"},[a("span",{staticClass:"account-1"},[t._v("结算时间")]),t._v(" "),a("span",{staticClass:"account-2"},[t._v(t._s(t.payTime))])])])])],1)},staticRenderFns:[]}},368:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"workorder-page"},[a("ma-head",{attrs:{"curr-id":"02"}}),t._v(" "),a("zs-breadcrumb",{attrs:{separator:"arrow-right"}},[a("zs-breadcrumb-item",{attrs:{to:"/web/merchant/home/workorder/balance.html?tab=2#eyJ0YWIiOjJ9"}},[t._v("工单结算")]),t._v(" "),a("zs-breadcrumb-item",[t._v("已结算详情")])],1),t._v(" "),a("maining",{tag:"component",model:{value:t.isLoading,callback:function(e){t.isLoading=e},expression:"isLoading"}})],1)},staticRenderFns:[]}},401:function(t,e){},439:function(t,e){},472:function(t,e,a){t.exports=a(60)},60:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(2),i=a(270),o=a.n(i),n=a(4),c=(a.n(n),a(5),a(3));s.a.use(c.a),new s.a({el:"#app",render:function(t){return t(o.a)}})}},[472]);